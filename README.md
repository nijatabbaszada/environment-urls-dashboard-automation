# Unified Environment Dashboard
> Example scope: Core System / Client Portal / Monitoring Stack

This project provides a **centralised dashboard** that displays environment URLs for multiple systems, specifically `core-system`, `client-portal`, and `monitoring-stack`, across different deployment environments (`prod`, `preprod`, `develop`). The dashboard is automatically generated and deployed to Kubernetes, where it is served via NGINX.

---

## Project Structure

```bash
environment-urls-dashboard-automation/
â”‚
â”œâ”€â”€ core-system/              # Core system environment URLs and config
â”œâ”€â”€ client-portal/            # Client portal environment URLs and config
â”œâ”€â”€ monitoring-stack/         # Monitoring and observability system URLs
â”‚
â”œâ”€â”€ deployment/
â”‚   â”œâ”€â”€ core-generate-index.py        # HTML generator for Core System
â”‚   â”œâ”€â”€ portal-generate-index.py      # HTML generator for Client Portal
â”‚   â”œâ”€â”€ monitoring-generate-index.py  # HTML generator for Monitoring Stack
â”‚   â”œâ”€â”€ deployments.yaml              # Kubernetes deployment & service config
â”‚   â””â”€â”€ index.html                    # Root landing/redirect HTML
â”‚
â””â”€â”€ .gitlab-ci.yml                    # GitLab CI/CD pipeline configuration
```
## Backend Overview

The system works as a static dashboard.  
All backend logic runs during the CI/CD pipeline execution:

- Python scripts generate static HTML content from environment definitions.
- The generated HTML is stored inside Kubernetes as ConfigMaps.
- NGINX serves the dashboard as static files.

There is no runtime backend service or database.  
Updating environment URLs and pushing to GitLab triggers a full regeneration of the dashboard.

### Script Responsibilities

All dashboard pages are generated by Python scripts stored in the `deployment/` directory:

- `core-generate-index.py`  
  Generates the Core System dashboard page using data from `core-system/`.

- `portal-generate-index.py`  
  Generates the Client Portal dashboard page using data from `client-portal/`.

- `monitoring-generate-index.py`  
  Generates the Monitoring dashboard page using data from `monitoring-stack/`.

The generated output files are placed back into the `deployment/` directory (e.g., `core-index.html`, `portal-index.html`, `monitoring-index.html`), which are later packaged into Kubernetes ConfigMaps and served via NGINX.

`deployment/index.html` acts as the root landing page for the dashboard.

### How the Scripts Are Used in CI/CD

During the **generate-index** stage of `.gitlab-ci.yml`:

1. Python scripts read environment service definitions from the YAML files.
2. The scripts convert these definitions into formatted HTML dashboard pages.
3. The resulting HTML files are stored as artifacts and passed to the **deploy** stage.
4. The **deploy** stage updates Kubernetes ConfigMaps with these HTML files.
5. NGINX automatically serves the updated dashboard.

No scripts run inside the dashboard runtime itself â€” everything happens during deployment.

### ğŸ”— How to Add a New URL

To add a new service or system URL, follow these steps:

1ï¸âƒ£ **Choose the correct environment folder**

Determine which system the URL belongs to:

- `core-system/`

- `client-portal/`

- `monitoring-stack/`

2ï¸âƒ£ **Select the correct environment YAML file**

- `prod.yaml` â†’ Production environment

- `preprod.yaml` â†’ Pre-production / Testing environment

- `develop.yaml` â†’ Development environment

3ï¸âƒ£ **Add the new URL entry**

Example modification in prod.yaml:

```bash
prod:
  - https://service-a.production.example.com/
  - https://new-service-prod.example.com   # âœ… Newly added URL
```

4ï¸âƒ£ **Push your changes to GitLab**

5ï¸âƒ£ **CI/CD Pipeline executes automatically**
The pipeline will:

- `Generate updated HTML index files`

- `Update Kubernetes ConfigMaps`

- `Restart the dashboard deployment`

6ï¸âƒ£ **Open the Dashboard to verify**

After deployment completes, open:

ğŸ”— **Unified Environment Dashboard:**

[http://environment-urls.your-domain/](http://environment-urls.your-domain/)


### **Example Dashboard Pages**

**Main Overview Page**
![All Environments Overview](./assets/image-all.png)

**Core System Page**
![Core System Environments](./assets/image-core.png)